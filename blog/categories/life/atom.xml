<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Life | 8xx8 (Андрей Кулаков)]]></title>
  <link href="http://8xx8.ru/blog/categories/life/atom.xml" rel="self"/>
  <link href="http://8xx8.ru/"/>
  <updated>2017-12-14T00:16:50+07:00</updated>
  <id>http://8xx8.ru/</id>
  <author>
    <name><![CDATA[Andrey Kulakov (8xx8)]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Keydown - как я делаю презентации]]></title>
    <link href="http://8xx8.ru/blog/2013/01/11/keydown-kak-ia-dielaiu-priezientatsii/"/>
    <updated>2013-01-11T14:57:00+07:00</updated>
    <id>http://8xx8.ru/blog/2013/01/11/keydown-kak-ia-dielaiu-priezientatsii</id>
    <content type="html"><![CDATA[<p>Я очень люблю, если каким-либо инструментом можно по максимуму управлять с клавиатуры. Так же я очень люблю автоматизацию, <code>Markdown</code> и просто красивые вещи. Я не люблю программы с перегруженным интерфейсом и много тыкать мышью для того, чтобы выполнить простешее действие.</p>

<p>Всё что мне нужно для презентации это — каскад слайдов и иметь возможность переходить по ним в разных направлениях, чтобы текст с них хорошо читался и выглядело красиво. Я ленив. Я хочу просто набрать текст, нажать кнопочку и чтобы БАХ, и мой текст превратися в презентацию размещённую в интернете и готовую к показу.</p>

<p>Мечта? Нет. Реальность.</p>

<!-- more -->


<h2>В кратце о технологиях</h2>

<p><a href="http://daringfireball.net/projects/markdown/">Markdown</a> — облегчённый язык разметки. Первоначально создан Джоном Грубером (англ. John Gruber) и Аароном Шварцем, целью которых являлось создание максимально удобочитаемого и удобного в публикации облегчённого языка разметки</p>

<p><a href="https://github.com/infews/keydown">Keydown</a> — Генератор HTML5 презентаций из Markdown кода.</p>

<p><a href="http://pages.github.com/">Github::Pages</a> — Хостинг статических сайтов, позволяет в один клик из Git репозитория сделать сайт опубликованный в вебе.</p>

<h2>Рабочий процесс</h2>

<p>Разберём как это делается на классическом примере <code>Hello World!</code>. Создадим презентацию из двух слайдов c текстом Hello и World.</p>

<p>Устанавливаем гем <code>keydown</code></p>

<p><code>
gem install keydown
</code></p>

<p>Генерируем новую презентацию</p>

<p><code>
keydown generate hello-world
</code></p>

<p>Переходим в получившуюся папку и переименовывем <code>slides.md</code> в <code>index.md</code>, чтобы впоследствии упростить публикацию</p>

<p><code>
cd hello-world
mv slides.md index.md
</code></p>

<p>Любым удобным способом редактируем файл <code>index.md</code>, заменив всё что в нём на:</p>

<p>```</p>

<h1>hello-world</h1>

<p>!SLIDE</p>

<h1>Первый слайд</h1>

<h2>Hello</h2>

<p>!SLIDE</p>

<h1>Второй слайд</h1>

<h2>World</h2>

<p>```</p>

<p>Генерируем слайды</p>

<p><code>
keydown slides index.md
</code></p>

<p>Идём на Github и создаём там новый репозиторий <code>hello-world</code>, затем из папки с презентацией выполняем следующие комманды подставив вместо <code>&lt;адрес_репозитория&gt;</code> адресс новго репозитория. Он должен выглядить типа: <code>git@github.com:ВАШ_ЛОГИН/hello-world.git</code>.</p>

<p><code>
git init
git remote add origin &lt;адрес_репозитория&gt;
echo '.saas-cache' &gt; .gitignore
git checkout -b gh_pages
git add .
git commit -m "Init commit"
git push -u origin master:gh-pages
</code></p>

<p>Всё. Ждём. По адресу <code>http://ВАШ_ЛОГИН.github.com/hello-world</code> должна скоро появиться презентация.</p>

<h2>В дальнейшем чтобы внести изменения</h2>

<ul>
<li>Любым удобным способом редактируем файл <code>index.md</code></li>
<li>Генерируем слайды (<code>keydown slides index.md</code>)</li>
<li>Коммитим, пушим</li>
</ul>


<p><code>
git add .
git commit -m "changes"
git push
</code></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Дорожные докладаторы. От @Ulway до Waytag.ru]]></title>
    <link href="http://8xx8.ru/blog/2013/01/09/dorojnie-dokladatory/"/>
    <updated>2013-01-09T14:21:00+07:00</updated>
    <id>http://8xx8.ru/blog/2013/01/09/dorojnie-dokladatory</id>
    <content type="html"><![CDATA[<p>Сейчас стало модным делать стартапы. У каждого второго разработчика есть свой. А в Rails сообществе ­— у каждого первого, наверное. И чтобы оставаться в тренде я тоже решил принять участие в разработке одного интересного сервиса.</p>

<p>Небольшая история о том, как я докатился до такой жизни.</p>

<!-- more -->


<p>Как известно в нашей стране две проблемы и, если с первой ничего сделать нельзя, то иметь актуальную информацию о состоянии второй можно.</p>

<p>Если кто-то еще не догадался, речь идет о ситуации на дорогах.</p>

<p>В нашем городе есть несколько способов узнать о том, что происходит на дорогах. Можно послушать радио (2х2 и Дорожное), можно посмотреть Яндекс.Пробки, а можно почитать ICQ бот. Каждый из них в чём-то хорош, но ни один из них не подходил в полной мере моему другу, заядлому микроблогеру, <a href="https://twitter.com/vdv73rus">Дмитрию Вислову</a>.</p>

<p>Неудобства были настолько заметными, что 20 сентября 2011 года ситуация достигла критической точки, и он с ещё двумя товарищами (<a href="https://twitter.com/realmyst">Александром Щербининым</a>, <a href="https://twitter.com/kostya_sokolov">Костей Соколовым</a>), пожертвовав законным перерывом на обед, сделал робота, который читает тот самый <strong>ICQ бот</strong> с информацией о дорогах и транслирует всё в специально созданный аккаунт <a href="https://twitter.com/Ulway">@Ulway</a>..</p>

<p>Идея пришлась по душе многим из нашего окружения, твиттер аккаунт быстро набрал около 200 подписчиков, в основном из друзей, знакомых, знакомых знакомых и т.д. Техническая сторона вопроса была достаточно тривиальной, скрипт читал по <code>cron</code>у бот, парсил содержимое, сохранял в базу для избежания дубликатов и отправлял в твиттер.</p>

<p>Через месяц успешной работы, основной разработчик начал свою хардкорную жизнь программиста и с головой ушёл в изучение Ruby/Rails. Какое-то время сервис поддерживали Юрий Токарев, Алексей Загайчук. Но затем в феврале 2012 года проект попал в мои руки. Попав в мои руки , скриптик сразу же был обёрнут в микрофреймворк <a href="http://silex.sensiolabs.org/">Silex</a>, что позволило немного упорядочить код.</p>

<p>Серьёзно к проекту никто не относился, работы в основном проводились в обед и редко. Да и зачем? Просто небольшое удобство в основном для себя и друзей, и так проект жил. К середине Марта 2012 года в подписчиках было около 350 человек, не такой уж и значительный рост за 4 месяца.</p>

<p>В среднем мы получали и публиковали 5-10 сообщений в сутки. Мало. Решили расширить список источников информации. Выбор пал на хештег #ulway. В нем обыватели нашего города иногда оставляли информацию о происшествиях. Там было не много материала, но хоть что-то. Схему работы придумали простую, раз в 10 минут PHP робот читает хештег, фильтрует мат и публикует от имени сервиса то, что должно пройти.</p>

<p>Неактивно, но пошла популяризация самого хештега <strong>#ulway</strong>.</p>

<p>Количество подписчиков начало расти. Из этого вытекало несколько задач:</p>

<ul>
<li>более сложная фильтрация с учётам смысловой нагрузки;</li>
<li>сайт проекта с возможностью отправить сообщение с него;</li>
<li>чтение сообщений из реплаев твиттера;</li>
<li>рефакторинг бекенд части.</li>
</ul>


<p>Так появился <strong>ulway.net</strong>.</p>

<p>Мы торопились, хотели закончить к конференции “Стачка!”, поэтому бекенд было решено не переписывать.</p>

<p>Фронтэнд был написан на jQuery mobile. Мы хотели делать сразу приложение для мобильных телефонов, используя PhoneGap. Код был открыт, репозиторий и ныне на <a href="https://github.com/Andrew8xx8/ulway-mobile">GitHub</a>.</p>

<p>Бекенд всё так же остался на <a href="http://silex.sensiolabs.org/">Silex</a>, к нему лишь прибавился нехитрый алгоритм оценки “полезности” сообщения. Состоит он из частотного словаря, на основе которого высчитывается рейтинг сообщения, в случае, если оно проходит определённый порог, установленный экспериментальным путём, то сообщение считается подходящим. Частотный словарь подстраивается на основе того какие слова были в том сообщении, которое прошло фильтр.</p>

<p>К выступлению на <a href="http://www.slideshare.net/vdv73rus/ss-12567768">&ldquo;Стачке&rdquo;</a> фильтр и публикация сообщений работали. Сам доклад я пропустил, но он способствовал продвижению идеи в массы.</p>

<p>Моя светлая сторона умоляла начать делать всё “как надо”. Под впечатлением “Стачки” хотелось сразу писать на erlang. Задача казалось бы как раз для него! Но неделя глубокого исследования этого вопроса показала</p>

<ul>
<li>освоить erlang быстро с моим уровнем подготовки не получится;</li>
<li>работа со строками в erlang это ад.</li>
</ul>


<p>Объём быдлокода давил на моральные принципы, нужно было искать путь. И его, сам того не зная, подсказал Кирил Мокевнин. Вот <a href="https://twitter.com/mokevnin/status/222960857171247105">тут</a>.</p>

<p>На любом языке одинаково можно писать как хорошие, так и плохие программы. Программа ­— это отражение модели мышления программиста в виде языка, понятного компьютеру, и для меня пришло время развивать новую модель мышления.</p>

<p>Был использован <a href="http://getcomposer.org/">Composer</a> для управления зависимостями. В качестве основы
остался <a href="http://silex.sensiolabs.org/">Silex</a>, но на этот раз я разобрался как работает <a href="http://silex.sensiolabs.org/doc/services.html">Dependency Injection</a> в нём. Был использован <a href="http://symfony.com/doc/2.0/components/console/introduction.html">Simfony::Console</a> для реализации взаимодействия с приложением через консоль. Для твиттера после долгих мучений подошёл лишь один пакет, но и его пришлось <a href="https://github.com/dg/twitter-php">допилить</a>.</p>

<p>Фронтенд был переделан на Twitter Bootstrap, но только его главная страница. Мы оба ленились переделывать саму форму с JQuery Mobile, на ней было много JavaScript лапши. Форма была взята из предыдущей версии и в таком состоянии &ldquo;франкенштейна&rdquo; это проработало ещё какое-то время.</p>

<p>Система работала достаточно стабильно. Подписчиков уже стало около 600. Люди стали активно публиковать свои сообщения.</p>

<p>Нужно было доводить сервис до ума, но мы загорелись идеей расшириться в другие города. Наши желания никак не вписывалась в существующую архитектуру. Нужен был серьёзный веб фреймворк с низким порогом вхождения и развитой инфраструктурой.</p>

<p>Мы приняли решение бросить разработку текущей вресии и начать делать всё на рельсах. Причина крылась не в том, что это сейчас модно, а в том, что в инфраструктуре Ruby/Rails больше гибких, удобных инструментов для быстрой разработки веб-приложений.</p>

<p>После конференции RailsClub, которая проходила в нашем городе, мы пообщались с коллегами из Чебоксар, которым очень понравилась идея нашего сревиса и то, как он работает в Ульяновске. Они предложили свою помощь в популяризации в своём регионе. Идею также похвалили и ребята из <a href="http://evrone.ru/">http://evrone.ru/</a> С ними мы обменялись наклейкамми (Ulway на GistFolw) С этого же момента мы поняли, что приколюшка “для своих” вышла за рамки этого состояния. Ulway ­— это полноценный проект требующий больше сил и времени.</p>

<p>Нужно было придумать название для новой системы, которое бы отражало общее отношение к городам. Так и сошлись на <a href="http://waytag.ru">Waytag.ru</a>.</p>

<p>Следующий шаг, аренда VPS на <a href="http://clodo.ru">Clodo</a> и полное её администрирование через <a href="http://www.opscode.com/chef/">Chef</a>.</p>

<p>Чтобы обеспечить быстрый и безболезненный переход в кратчайшие сроки уже на Rails, было сделана API модель, которая повторяла структуру старой базы. Старая система всё то, что отправляла в твиттер отправляла заодно и туда. Изменение базы данных в Rails осуществляется через специальные миграции, что позволило при переходе на новую версию просто их применить к существующей уже базе.</p>

<p>Сама архитектура системы усложнилась. Теперь нет скриптов которые по
<code>cron</code>&lsquo;у читают твиттер. У нас работает комплекс процессов-демонов запущенных под
runit, которые получают сообщения от твиттера через <a href="https://dev.twitter.com/docs/streaming-apis">Twitter Streaming API</a>, осуществляют их фильтрацию и публикацию, но уже через <a href="https://dev.twitter.com/docs/api/1.1">Twitter Rest API</a>.</p>

<p>Так же появилась няшная админка, в которой можно посмотреть, поискать, отредактировать, создать всё то, что есть внутри нашей базы (прощай PhpMyAdmin!).</p>

<p>Внутри админки — частотный словарь, сообщения, блек-лист аккаунтов, сообщения  которых игнорируются, а также список улиц, ну и сами города со служебной информацией.</p>

<p>9  января 2013 года система окончательно была запущена. Все старые версии отключены.</p>

<p>Сейчас для Ульяновска в день публикуется около 15-30 сообщений, статистику за декабрь прошлого года можно заценить <a href="https://gist.github.com/4368800">тут</a>.</p>

<p>Мы таже присутствуем и в &ldquo;офлайне&rdquo; Иногда мы раздаём наклейки и футболки. Иногда всем подряд, иногда особо отличившимся, но обэтом лучше напишет <a href="https://twitter.com/vdv73rus">Дмитрий Вислов</a>.</p>

<p>В ближайшем будущем проект обретёт фирменный стиль, будет вести свой отдельный блог, обзаведётся поддоменами для городов, заново подружится с ICQ ботом и много чего ещё =)</p>

<p>Наш сайт:</p>

<ul>
<li><a href="http://waytag.ru">http://waytag.ru</a></li>
</ul>


<p>Твиттеры:</p>

<ul>
<li><a href="https://twitter.com/WaytagRU">Твиттер проекта (@WaytagRu)</a>!</li>
<li><a href="http://twitter.com/Chebway">Дорожная ситуация в Чебоксарах (@Chebway + #chebway)</a></li>
<li><a href="http://twitter.com/Ulway">Дорожная ситуация в Ульяновске (@Ulway + #ulway)</a></li>
</ul>


<p>Почта для связи:</p>

<p><a href="mailto:mail@waytag.ru">mail@waytag.ru</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Открываем терминал правильно]]></title>
    <link href="http://8xx8.ru/blog/2012/12/03/otkryvaiem-tierminal-pravilno/"/>
    <updated>2012-12-03T14:01:00+07:00</updated>
    <id>http://8xx8.ru/blog/2012/12/03/otkryvaiem-tierminal-pravilno</id>
    <content type="html"><![CDATA[<p>Я устал от того, что начав работу с проектом и открыв терминал, я вынужден каждый раз открывать вкладки и запускать в них однотипные команды. Отсутствие же адекватных названий вкладок, в случае, если открыто более одного проекта,  превращает навигацию по открытым терминалам в ад. Terminal, Terminale, Termina and so on&hellip;</p>

<p>В связи с этим я решил привнести немного автоматизации в этот процесс.</p>

<!-- more -->


<p>Не секрет, что при запуске терминала можно указать опции, которые повлияют на его последующую работу. Наиболее интересные из них:</p>

<p><code>
  --tab Open a new tab in the last-opened window with the default profile
  --hide-menubar Turn off the menubar
  --maximize Maximise the window
  -e, --command Execute the argument to this option inside the terminal
  -t, --title=TITLE Set the terminal title
</code></p>

<p>Исходя из этого команда для открытия терминала без строки меню с двумя вкладками и открытыми в них vim и zsh выглядит так:</p>

<p><code>
  gnome-terminal --maximize --hide-menubar --tab --tab
</code></p>

<p>Добавим названия заголовков:</p>

<p><code>
  gnome-terminal --maximize --hide-menubar --tab -t "VIM | myproj" --tab -t "CONSOLE | myproj"
</code></p>

<p>Добавим исполнение команд:</p>

<p><code>
  gnome-terminal --maximize --hide-menubar --tab -e "zsh -c 'cd ~/myproj &amp;&amp; vim'" -t "VIM | myproj" --tab -e "zsh -c 'cd ~/myproj; exec zsh" -t "CONSOLE | myproj"
</code></p>

<p>Важный аспект состоит в том, что вкладка закрывается сразу же после выполнения команды, поэтому если нужно загрузить shell, следует исползовать exec.</p>

<p>Писать такую длинную команду каждый раз неудобно, поэтому лучше написать скрипт для загрузки.
<a href="https://gist.github.com/4183308">Вот мой</a></p>

<p><img src="/images/content/open-terminal.png" title="[Так выглядит мой вариант]" ></p>

<p>P.S.
* Более подробно о доступных опциях терминала можно узнать выполнив: <code>gnome-terminal --help-all</code>
* Для Linux Mint все опции в силе. Просто используйте mate-terminal вместо gnome-terminal
* Для bash всё тоже самое, только zsh следует изменить на bash, либо на другой ваш любимый Shell.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ZSH: неработающие кнопки Home и End]]></title>
    <link href="http://8xx8.ru/blog/2011/12/03/zsh-nierabotaiushchiie-knopki-home-i-end/"/>
    <updated>2011-12-03T13:54:00+07:00</updated>
    <id>http://8xx8.ru/blog/2011/12/03/zsh-nierabotaiushchiie-knopki-home-i-end</id>
    <content type="html"><![CDATA[<p>При доступе к серверу из Putty или терминала Gnome иногда не работают кнопки Home и End.</p>

<p>Решение простое. Нужно в файле ~/.zshrc добавить эти строки:</p>

<p>```
bindkey &ldquo;^[[1~&rdquo; beginning-of-line
bindkey &ldquo;^[[4~&rdquo; end-of-line</p>

<p>bindkey &ldquo;^[OH&rdquo; beginning-of-line
bindkey &ldquo;^[OF&rdquo; end-of-line
```</p>

<p>Первые две для Putty другие для Gnome (Mate) Trerminal.</p>
]]></content>
  </entry>
  
</feed>
