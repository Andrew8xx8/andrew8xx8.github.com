---
layout: post
title: "Все или не все? (git push)"
date: 2013-06-12 13:45
comments: true
categories: Git
tags:
  - git
  - force
  - push
  - fuckup
---
Часто ли вы задумывались над тем, какие ветки будут отправлены в
удалённый репозиторий при выполнении команды `push`?

А поможет ли вам задуматься над этим такая картина? 

{% img /images/content/force-push/1.png [] %}

Наверное, поможет, особенно если увидеть это в ночь перед релизом. А
началось-то все с того, что хотели фичу красиво слить через rebase.

Так давайте разберёмся, что пошло не так.

<!-- more -->

Гит пушит всё. Да, вы не ослышались. По умолчанию это так и есть. Беседы
о том, что поведение по умолчанию не безопасное оставим за кадром
и найдём решение.

Поможет нам найстройка `push.default`. Она может принимать такие
значения:

- `nothing` - не пушить ничего
- `matching` - пушить все ветки, названия которых в локальном репозитории 
совпадают с названиями в удалённом репозитории. 
*Это как раз та опция, которая используется, если ничего не задано*
- `upstream` - пушить только текущую ветку в ту ветку на удалённом
  репозитории, которая прописана в конфиге как upstream
- `tracking` - устаревший синоним для `upstream`
- `current` - пушить только текущую ветку в ту ветку на удалённом
  репозитории с которой совпадёт имя

Я считаю, что самый безопасный метод это `upstream`. Глобально установить
эту опцию можно выполнив комманду:

```bash
git config --global push.default upstream
```

Или написать в `~/.gitconfig` вручную:

```
[push]
  default = upstream
```
