---
layout: post
title: "Поиск по проекту с помощью Ag"
date: 2014-03-24 12:34
comments: true
categories: vim
tags:
  - grep
  - ag
  - .vimrc
---

Я давно пользуюсь [The Silver Searcher](https://github.com/ggreer/the_silver_searcher) как заменой стандартному `grep`. О достоинствах такого выбора можно посмотреть на странице проекта.

Для своего любимого редактора я долгое время использовал плагин [Ack](https://github.com/mileszs/ack.vim). Он обладает рядом багов, но в целом пользоваться можно.

Недавно я наткнулся на его форк [Ag](https://github.com/rking/ag.vim). Зацепило в нем две вещи:

* строка поиска сохраняется в регистр поиска;
* наличие комманды AgFromSearch, которая позволяет искать то, чтобыло в регистре поиска.

Эти факторы позитивно влияют на продуктивность.

В найденом файле все вхождения будут подсвечены (ну если включен `hlsearch`), и по нему сразу можно будет перемещаться с помощью `n` или `N`.

Если нужно поискать слово из текущего файла, нажимаем на этом слове `*` и выполнив `:AgFromSearch` без параметров сразу получаем результат.

Так же интересной показалась команда  `:AgFile`, для поиска файла по имени.

Ну и как бонус, две буквы набирать проще трех.

<!-- more -->

Установка плагина не доставит хлопот, если вы используете [ Vundle ](https://github.com/gmarik/Vundle.vim), достаточно вписать в ваш .vimrc:

```
Bundle 'rking/ag.vim'
```

Из настроек я посчитал необходиммым:

```
  " Конфиг для вызова ag
  let g:agprg = 'ag --nogroup --nocolor --column --smart-case'

  let g:aghighlight=1 " Подсветить поиск
  cabbrev As AgFromSearch " Псевдоним чтобы меньше писать
```

[ Коммит ](https://github.com/Andrew8xx8/dotfiles/commit/b320da45a2ece73611a5f5b855539a41a2f38bc8) с изменениями в моем репозитории.
